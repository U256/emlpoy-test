"use strict";import{indexOfElem}from"./indexOfElement.js";let toTabButtonsArray=document.querySelectorAll(".authentication-block__to-tab-btn"),toTabButtonsContainer=document.querySelector(".authentication-block__top-row"),tabsArray=document.querySelectorAll(".authentication-tab");toTabButtonsContainer.addEventListener("click",(function(e){e.target.hasAttribute("type")&&(toTabButtonsArray.forEach(e=>{e.classList.remove("authentication-block__to-tab-btn_active")}),tabsArray.forEach(e=>{e.classList.remove("authentication-tab_active")}),e.target.classList.add("authentication-block__to-tab-btn_active"),tabsArray[indexOfElem(e.target)].classList.add("authentication-tab_active"))}));let personSettingsForm=document.querySelector(".person-settings-block__form"),submitPersonSettings=personSettingsForm.submitSettings,persSettingsFields=document.querySelectorAll(".person-settings-block__field"),persSettingsFieldWrappers=document.querySelectorAll(".person-settings-block__field-wrapper"),notifSettingsForm=document.querySelector(".notif-settings-block__form"),submitNotifSettings=notifSettingsForm.submitNotifications,notifCheckboxesArr=document.querySelectorAll(".notif-settings-block__checkbox");function showNotice(e,t){let i=document.createElement("div");i.className="steer-notice "+e,i.innerHTML=t,document.body.append(i),setTimeout(()=>i.remove(),5e3)}function showInputHint(e,t){let i=document.createElement("span");i.className="fill-required",i.innerHTML=t,persSettingsFieldWrappers[e].append(i),setTimeout(()=>i.remove(),7e3)}function areRequiredFieldsFill(){return!(""==persSettingsFields[0].value||""==persSettingsFields[1].value||""==persSettingsFields[2].value||!persSettingsFields[2].value.includes("@")||!persSettingsFields[2].value.includes("."))}function isHintAlreadyDisplayed(e){return persSettingsFieldWrappers[e].lastElementChild.classList.contains("fill-required")}function setCursorPosition(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}}function mask(e){let t=0,i="+_ (___) ___ ____".replace(/\D/g,""),s=this.value.replace(/\D/g,"");i.length>=s.length&&(s=i),this.value="+_ (___) ___ ____".replace(/./g,(function(e){return/[_\d]/.test(e)&&t<s.length?s.charAt(t++):t>=s.length?"":e})),"blur"==e.type?2==this.value.length&&(this.value=""):setCursorPosition(this.value.length,this)}personSettingsForm.addEventListener("input",()=>{areRequiredFieldsFill()?submitPersonSettings.classList.add("tab-profile__submit-button_active"):submitPersonSettings.classList.remove("tab-profile__submit-button_active")}),personSettingsForm.addEventListener("submit",e=>{e.preventDefault(),submitPersonSettings.classList.contains("tab-profile__submit-button_active")?(persSettingsFields.forEach(e=>e.value=""),submitPersonSettings.classList.remove("tab-profile__submit-button_active"),showNotice("submit-notice","Saved")):(""!=persSettingsFields[0].value||isHintAlreadyDisplayed(0)||showInputHint(0,"Please specify the first name"),""!=persSettingsFields[1].value||isHintAlreadyDisplayed(1)||showInputHint(1,"Please specify the last name"),""!=persSettingsFields[2].value||isHintAlreadyDisplayed(2)?isHintAlreadyDisplayed(2)||persSettingsFields[2].value.includes("@")&&persSettingsFields[2].value.includes(".")?(persSettingsFieldWrappers[2].lastElementChild.remove(),showInputHint(2,"...@example.com")):showInputHint(2,"...@example.com"):showInputHint(2,"Please specify the email"))});let numberField=document.querySelector('input[name="changedNumber"]');function currentCheckboxesPositions(e){let t=[];return e.forEach(e=>{t.push(e.checked)}),t}function areArraysTheSame(e,t){for(let i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}numberField.addEventListener("input",mask),numberField.addEventListener("focus",mask),numberField.addEventListener("blur",mask);let checksPositionsOnLoad=currentCheckboxesPositions(notifCheckboxesArr),isSteer1Set=!1,isSteer3Set=!1,isSteer5Set=!1;notifSettingsForm.addEventListener("click",e=>{if(e.target.checked){let t=document.createElement("div");t.className="steer-for-checkbox",e.target!=notifCheckboxesArr[1]||isSteer1Set||(t.innerHTML="For your mobile or tablet device",e.target.parentNode.after(t),isSteer1Set=!0),e.target!=notifCheckboxesArr[3]||isSteer3Set||(t.innerHTML="Customer calls only",e.target.parentNode.after(t),isSteer3Set=!0),e.target!=notifCheckboxesArr[5]||isSteer5Set||(t.innerHTML="For your mobile or tablet device",e.target.parentNode.after(t),isSteer5Set=!0)}areArraysTheSame(currentCheckboxesPositions(notifCheckboxesArr),checksPositionsOnLoad)?(submitNotifSettings.setAttribute("disabled","true"),submitNotifSettings.classList.remove("tab-profile__submit-button_active")):(submitNotifSettings.removeAttribute("disabled"),submitNotifSettings.classList.add("tab-profile__submit-button_active"))}),notifSettingsForm.addEventListener("submit",e=>{e.preventDefault(),submitNotifSettings.hasAttribute("disabled")||showNotice("submit-notice","Saved"),submitNotifSettings.setAttribute("disabled","true"),submitNotifSettings.classList.remove("tab-profile__submit-button_active"),checksPositionsOnLoad=currentCheckboxesPositions(notifCheckboxesArr)});